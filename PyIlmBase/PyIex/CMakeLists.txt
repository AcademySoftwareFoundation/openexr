# yue.nicholas@gmail.com

IF(BUILD_SHARED_LIBS)
    ADD_DEFINITIONS(-DIEX_EXPORTS)
ENDIF()

INCLUDE_DIRECTORIES( ${PYTHON_INCLUDE_DIRS} ${ILMBASE_INCLUDE_DIRS} ${Boost_INCLUDE_DIRS})
LINK_DIRECTORIES( ${PYTHON_LINK_DIRECTORIES} ${ILMBASE_LINK_DIRECTORIES} ${Boost_LINK_DIRECTORIES})

ADD_LIBRARY ( PyIex ${LIB_TYPE}
  PyIex.cpp
  )

TARGET_LINK_LIBRARIES ( PyIex
  ${PYTHON_LIBRARIES}
  )

INSTALL ( TARGETS
  PyIex
  DESTINATION
  lib
)

INSTALL ( FILES 
  PyIex.h
  PyIexExport.h
  PyIexTypeTranslator.h
  DESTINATION
  include/OpenEXR
)

ADD_LIBRARY ( iexmodule ${LIB_TYPE}
  iexmodule.cpp
  )

SET_TARGET_PROPERTIES (iexmodule PROPERTIES PREFIX "")

TARGET_LINK_LIBRARIES ( iexmodule
  PyIex
  Iex
  ${PYTHON_LIBRARIES}
  ${Boost_LIBRARIES}
  )

INSTALL ( TARGETS
  iexmodule
  DESTINATION
  lib/python${PYTHON_VERSION_MAJOR}.${PYTHON_VERSION_MINOR}/site-package
)
