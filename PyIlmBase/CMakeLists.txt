CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

PROJECT ( PyIlmBase )

ENABLE_TESTING()

SET (Python_ADDITIONAL_VERSIONS "2.7")
FIND_PACKAGE( PythonInterp REQUIRED)
FIND_PACKAGE( PythonLibs REQUIRED)
MESSAGE(STATUS "${PYTHONLIBS_VERSION_STRING}=${${PYTHONLIBS_VERSION_STRING}}")

set(Boost_USE_STATIC_LIBS       OFF)
set(Boost_USE_MULTITHREADED      ON)
set(Boost_USE_STATIC_RUNTIME    OFF)
FIND_PACKAGE ( Boost COMPONENTS python )

INCLUDE (FindPkgConfig)
PKG_CHECK_MODULES ( ILMBASE IlmBase )

IF ( NOT WIN32)
  ADD_DEFINITIONS ( -pthread )
ENDIF ()

SET (LIB_TYPE STATIC)
IF (BUILD_SHARED_LIBS)
  # User wants to build Dynamic Libraries, so change the LIB_TYPE variable to CMake keyword 'SHARED'
  SET (LIB_TYPE SHARED)
  IF (WIN32)
    ADD_DEFINITIONS(-DOPENEXR_DLL)
  ENDIF ()
ENDIF (BUILD_SHARED_LIBS)

ADD_SUBDIRECTORY ( PyIex )
ADD_SUBDIRECTORY ( PyImath )

ADD_SUBDIRECTORY ( PyIexTest )
